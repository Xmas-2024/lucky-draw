<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>聖誕派對一番賞抽獎</title>
  <script src="./js/all.js"></script>
  <link rel="stylesheet" href="./css/bg.css">
  <link rel="stylesheet" href="./css/list.css">
</head>

<body>
  <div class="background">
    <section class="snow">
      <div class="snowflake"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake1"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake2"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake3"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake4"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake5"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake6"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake7"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake8"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake9"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake10"><i class="fa-solid fa-snowflake"></i></div>
      <div class="snowflake11"><i class="fa-solid fa-snowflake"></i></div>
      <div class="snowflake12"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake13"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake14"><i class="fa-regular fa-snowflake"></i></div>
    </section>
  </div>
  <div class="list-container">
    <h1>🎄 聖誕派對一番賞抽獎 🎄</h1>
<div class="prizes">
      <div class="prize" id="prize-01" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-S1">DOUBLE CHANCE</div>
        <div class="prize-name">超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>
      <div class="prize" id="prize-02" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-S2">LAST ONE</div>
        <div class="prize-name">豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>
      <div class="prize" id="prize-03" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-A">A</div>
        <div class="prize-name">Dyson Supersonic™ Origin風筒 | 櫻花粉限定色</div>
        <div class="remaining">1/1</div>
      </div>
      <div class="prize" id="prize-04" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-B">B</div>
        <div class="prize-name">Sony WH-1000XM5 無線降噪耳機 | 黑色</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-05" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-C">C</div>
        <div class="prize-name">BRUNO 多功能電熱鍋 | 藍色</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-06" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-D">D</div>
        <div class="prize-name">JBLFlip 6 無線防水藍牙喇叭 | 藍色</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-07" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-D">D</div>
        <div class="prize-name">Nothing Ear 真無線藍牙耳機｜第三代｜白色</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-08" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">樂信 Rasonic RIC-GS21E 輕便式電磁爐</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-09" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">德國寶 German Pool KTT-109 便攜 摺疊式 旅行電熱水壺 0.6公升 | 白色/啡色</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-10" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">樂聲 Panasonic EW-1411 充電式水牙線</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-11" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">百佳 HK$500 Coupon</div>
        <div class="remaining">2/2</div>
      </div>

      <div class="prize" id="prize-12" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">Marketplace HK$500 Coupon</div>
        <div class="remaining">5/5</div>
      </div>

      <div class="prize" id="prize-13" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">Mannings HK$500 Coupon</div>
        <div class="remaining">2/2</div>
      </div>

      <div class="prize" id="prize-14" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">BRUNO 無線便攜攪拌杯 | 粉藍色</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-15" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">BRUNO 手沖滴漏咖啡杯 | 象牙白色</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-16" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">1Chiban BR-PTC21 PTC陶瓷防水霧暖風機</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-17" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">歐姆龍 Omron HEM-8712 手臂式電子血壓計</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-18" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">百佳 HK$300 Coupon</div>
        <div class="remaining">2/2</div>
      </div>

      <div class="prize" id="prize-19" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">Marketplace HK$300 Coupon</div>
        <div class="remaining">4/4</div>
      </div>

      <div class="prize" id="prize-20" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">Mannings HK$300 Coupon</div>
        <div class="remaining">2/2</div>
      </div>

      <div class="prize" id="prize-21" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">BRUNO 不銹鋼保溫杯 | 綠色</div>
        <div class="remaining">4/4</div>
      </div>

      <div class="prize" id="prize-22" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">Oral B 成人電動牙刷 Vitality Plus</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-23" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">小米體脂計S400 | 藍色</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-24" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">百佳 HK$200 Coupon</div>
        <div class="remaining">2/2</div>
      </div>

      <div class="prize" id="prize-25" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">Marketplace HK$200 Coupon</div>
        <div class="remaining">3/3</div>
      </div>

      <div class="prize" id="prize-26" style="filter: contrast(1);">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">Mannings HK$200 Coupon</div>
        <div class="remaining">2/2</div>
      </div>

    </div>

</body>

<script>
  function loadDoc() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        try {
          result = JSON.parse(this.responseText);
          result.Items.forEach(function(item) {
            try {
              //console.log(item);
              id = "prize-" + item.id.S;
              document.getElementById(id).getElementsByClassName("prize-name")[0].innerHTML = item.name.S;
              total = document.getElementById(id).getElementsByClassName("remaining")[0].innerHTML.split("/")[1];
              document.getElementById(id).getElementsByClassName("remaining")[0].innerHTML = item.qty.N + "/" + total;
              if (parseInt(item.qty.N) == 0) {
                document.getElementById(id).style.filter = "contrast(0.3)";
              } else {
                document.getElementById(id).style.filter = "contrast(1)";
              }
            } catch (e) {
              console.error("Error parsing item: ", e);
            }

          });

        } catch (e) {
          console.error("Error parsing JSON: ", e);
          console.log("Response: ", this.responseText);
        }
      }
    };
    xhttp.open("GET", "https://znojd4bork.execute-api.ap-southeast-1.amazonaws.com/default/listdb?httpMethod=GET", true);
    xhttp.send();
  }
  loadDoc()
  setInterval(loadDoc, 10000)
  </script>
  

</html>
